<div class="referral-container">
    <h2 class="main-title">
        <img src="assets/icons/referral-icon.png" alt="Referral Program Icon" class="main-title-icon">
        Referral Program
    </h2>
    <div class="referral-summary-cards">
      <div class="summary-card card">
        <h3>Total Referrals</h3>
        <p class="summary-value">{{ totalFilleuls }}</p>
      </div>
      <div class="summary-card card">
        <h3>
          <img src="assets/icons/money-bag.png" alt="Earnings Icon" class="header-icon">
          Total Earnings
        </h3>
        <p class="summary-value">{{ totalGains | currency:'EUR' }}</p>
      </div>
      <div class="summary-card card">
        <h3>Status</h3>
        <p class="summary-value">{{ statutParrainage }}</p>
      </div>
    </div>
  
    <div class="referral-code-section card">
      <h3>Your Referral Code</h3>
      <div class="code-display">
        <span class="referral-code">{{ referralCode }}</span>
        <button (click)="copyToClipboard()" class="copy-button">
          <img src="assets/icons/copy-icon.png" alt="Copy Icon" class="button-icon">
          Copy
        </button>
      </div>
      <div class="share-buttons">
        <button (click)="shareByEmail()" class="share-button email-button">
          <img src="assets/icons/email-icon.png" alt="Email Icon" class="button-icon">
          Share via Email
        </button>
        <button (click)="shareOnWhatsApp()" class="share-button whatsapp-button">
          <img src="assets/icons/whatsapp-icon.png" alt="WhatsApp Icon" class="button-icon">
          Share on WhatsApp
        </button>
      </div>
    </div>
  
    <div class="how-it-works-card card">
      <h3>How it Works?</h3>
      <p>1. Share your unique referral code with your friends and family.</p>
      <p>2. Your referrals sign up for E-Bank using your code.</p>
      <p>3. Once they complete their first transaction, they become active and you earn a reward!</p>
    </div>
  
    <div class="rewards-program-section card">
      <h3>Rewards Program</h3>
      <div class="rewards-grid">
        <div *ngFor="let reward of rewardsProgram" class="reward-tier-card">
          <div class="tier-header">
            <img [src]="getRewardStatusIcon(reward.status)" alt="{{ reward.status }} Icon" class="tier-icon">
            <span class="tier-status">{{ reward.status }}</span>
          </div>
          <p class="tier-filleuls">{{ reward.filleuls }}</p>
          <div class="progress-bar-container">
            <div class="progress-bar" [style.width.%]="getTierProgress(reward.status)" [ngClass]="getTierColorClass(reward.status)"></div>
          </div>
          <p class="tier-reward">{{ reward.reward }}</p>
        </div>
      </div>
    </div>
  
    <div class="filleuls-list-section card">
      <h3>My Referrals ({{ totalFilleuls }})</h3>
      <div class="table-responsive">
        <div class="filleuls-table">
          <div class="table-header">
            <span>Name</span>
            <span>Enrollment Date</span>
            <span>Status</span>
            <span>Earnings</span>
          </div>
          <div *ngFor="let filleul of filleuls" class="table-row">
            <span>{{ filleul.name }}</span>
            <span>{{ filleul.inscriptionDate | date:'shortDate' }}</span>
            <span [ngClass]="getFilleulStatusClass(filleul.status)">{{ filleul.status }}</span>
            <span>{{ filleul.gain ? (filleul.gain | currency:'EUR') : '-' }}</span>
          </div>
          <div *ngIf="filleuls.length === 0" class="no-filleuls-message">
            <p>You don't have any referrals yet. Share your code to start earning!</p>
          </div>
        </div>
      </div>
    </div>
  </div>
